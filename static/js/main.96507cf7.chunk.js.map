{"version":3,"sources":["components/DateFrequencyChart.js","App.js","index.js"],"names":["DateFrequencyChart","locationID","tokenID","LOCATION_API","fetchData","useState","startDate","setStartDate","endDate","setEndDate","dateRange","setDateRange","data","setData","alerts","setAlerts","ALERTS_API","useEffect","headers","Authorization","then","range","dateMove","Date","strDate","toISOString","slice","push","setDate","getDate","frequencyObj","reduce","a","b","i","length","gmtKey","timestamp","getTime","getTimezoneOffset","labels","Object","keys","datasets","label","values","backgroundColor","className","htmlFor","type","value","onChange","e","target","App","setTokenID","setLocationID","BASE_URL","TOKEN_API","api","fetch","response","json","getTokenID","access_token","getLocationID","id","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.96507cf7.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport './DateFrequencyChart.css';\n\nconst DateFrequencyChart = ({ locationID, tokenID, LOCATION_API, fetchData }) => {\n\tconst [startDate, setStartDate] = useState('2020-05-01');\n\tconst [endDate, setEndDate] = useState('2020-05-02');\n\tconst [dateRange, setDateRange] = useState([]);\n\tconst [data, setData] = useState({});\n\tconst [alerts, setAlerts] = useState([]);\n\n\tconst selector = '[ADAM]';\n\n\tconst ALERTS_API = `${LOCATION_API}/${locationID}/alerts?start_date=${startDate}&end_date=${endDate}&selector=${selector}`;\n\n\tconst handleStartDateChange = e => setStartDate(e.target.value);\n\n\tconst handleEndDateChange = e => setEndDate(e.target.value);\n\n\tuseEffect(() => {\n\t\tif (locationID) {\n\t\t\tfetchData(ALERTS_API, {headers: {Authorization: `Bearer ${tokenID}`}})\n\t\t\t\t.then(data => setAlerts(data.data));\t\t\n\t\t}\n\t}, [ALERTS_API]);\n\n\tuseEffect(() => {\n\t\tconst range = [];\n\t\tconst dateMove = new Date(startDate);\n\t\tlet strDate = startDate;\n\n\t\twhile (strDate < endDate) {\n\t\t    strDate = dateMove.toISOString().slice(0,10);\n\t\t    range.push(strDate);\n\t\t    dateMove.setDate(dateMove.getDate()+1);\n\t\t};\n\t\n\t\tsetDateRange(range);\n\t}, [startDate, endDate]);\n\n\tuseEffect(() => {\n\t\tconst frequencyObj = dateRange.reduce((a, b) => (a[b] = 0, a), {});\n\n\t\tfor (let i = 0; i < alerts.length; i++) {\n\t\t\tconst gmtKey = new Date(alerts[i].timestamp * 1000);\n\t\t\tconst key = new Date(gmtKey.getTime() - (gmtKey.getTimezoneOffset() * 60000)).toISOString();\n\n\t\t\tfrequencyObj[key.slice(0, 10)]++;\n\t\t}\n\n\t\tsetData({\n\t\t\tlabels: Object.keys(frequencyObj),\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tlabel: 'Number of events',\n\t\t\t\t\tdata: Object.values(frequencyObj),\n\t\t\t\t\tbackgroundColor: 'rgba(32, 121, 199, 0.2)'\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}, [alerts]);\n\n\treturn (\n\t\t<div className='DateFrequencyChart'>\n\t\t\t<div className='datepicker'>\n\t\t\t\t<label htmlFor=\"startDate\">From</label><br />\n\t\t\t\t<input type='date' value={startDate} onChange={handleStartDateChange} /><br />\n\t\t\t</div>\n\n\t\t\t<div className='datepicker'>\n\t\t\t\t<label htmlFor=\"endDate\">To</label><br />\n\t\t\t\t<input type='date' value={endDate} onChange={handleEndDateChange} /><br />\t\n\t\t\t</div>\n\t\t\t\n\t\t\t<div className='Bar'>\n\t\t\t\t<Bar data={data} />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default DateFrequencyChart;","import React, { useState, useEffect } from 'react';\nimport DateFrequencyChart from './components/DateFrequencyChart';\nimport './App.css';\n\nconst App = () => {\n\tconst [tokenID, setTokenID] = useState('');\n\tconst [locationID, setLocationID] = useState('');\n\n\tconst CLIENT_ID = '20AF566F';\n\tconst API_KEY = 'Vu112d0Wmg99bx/ax02bUlNipBEOv3uIPrf73ZNJ8NgvN0qlnhpqYfVP80eXhX2X';\n\tconst BASE_URL = 'https://appsrv.fastsensor.us:8890/';\n\tconst TOKEN_API = `${BASE_URL}oauth2/token?client_id=${CLIENT_ID}&api_key=${API_KEY}`;\n\tconst LOCATION_API = `${BASE_URL}v1/locations`;\n\n\tconst fetchData = async (api, headers) => {\n\t\tconst response = await fetch(api, headers);\n\t\treturn await response.json();\n\t};\n\n\tconst getTokenID = async () => {\n\t\tconst data = await fetchData(TOKEN_API);\n\n\t\tsetTokenID(data.access_token);\n\t};\n\n\tconst getLocationID = async () => {\n\t\tconst data = await (tokenID ? fetchData(LOCATION_API, {headers: {Authorization: `Bearer ${tokenID}`}}) : null);\n\n\t\tsetLocationID(data ? data.data[0].id : '');\n\t};\n\n\tuseEffect(() => {\n\t\tgetTokenID();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tgetLocationID();\n\t}, [tokenID]);\n\n    return (\n    \t<div className=\"App\">\n        \t<DateFrequencyChart locationID={locationID} tokenID={tokenID} LOCATION_API={LOCATION_API} fetchData={fetchData} />\n    \t</div>\n    );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}